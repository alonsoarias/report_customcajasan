{"version":3,"file":"report.min.js","sources":["../src/report.js"],"sourcesContent":["/**\n * JavaScript for the report_customcajasan report\n *\n * @module     block_report_customcajasan/report\n * @copyright  2025 Cajasan\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n    /**\n     * Initialize the module\n     */\n    function init() {\n        // Handle category change - update courses\n        $('#categoryid').on('change', function() {\n            var categoryId = $(this).val();\n            \n            // Clear course selection\n            $('#courseid').empty();\n            $('#courseid').append($('<option>', {\n                value: '',\n                text: M.util.get_string('option_all', 'block_report_customcajasan')\n            }));\n            \n            if (categoryId) {\n                // Get courses for the selected category\n                $.ajax({\n                    url: M.cfg.wwwroot + '/blocks/report_customcajasan/ajax/get_courses.php',\n                    type: 'GET',\n                    data: {\n                        'categoryid': categoryId,\n                        'sesskey': M.cfg.sesskey\n                    },\n                    dataType: 'json',\n                    success: function(data) {\n                        if (data.success && data.courses) {\n                            $.each(data.courses, function(index, course) {\n                                $('#courseid').append($('<option>', {\n                                    value: course.id,\n                                    text: course.fullname\n                                }));\n                            });\n                        }\n                    },\n                    error: function() {\n                        // Just use the default empty selection in case of error\n                        require(['core/log'], function(log) {\n                            log.debug('Error loading courses.');\n                        });\n                    }\n                });\n            }\n        });\n        \n        // Initialize datatable if library is available\n        if ($.fn.DataTable) {\n            $('#enrollment-report-table').DataTable({\n                \"paging\": true,\n                \"searching\": true,\n                \"ordering\": true,\n                \"info\": true,\n                \"responsive\": true,\n                \"pageLength\": 25,\n                \"language\": {\n                    \"search\": M.util.get_string('search'),\n                    \"lengthMenu\": M.util.get_string('show') +\n                        \" _MENU_ \" + M.util.get_string('entries'),\n                    \"info\": M.util.get_string('showing') +\n                        \" _START_ \" + M.util.get_string('to') +\n                        \" _END_ \" + M.util.get_string('of') +\n                        \" _TOTAL_ \" + M.util.get_string('entries'),\n                    \"infoEmpty\": M.util.get_string('showing') +\n                        \" 0 \" + M.util.get_string('to') +\n                        \" 0 \" + M.util.get_string('of') +\n                        \" 0 \" + M.util.get_string('entries'),\n                    \"infoFiltered\": \"(\" + M.util.get_string('filtered_from') +\n                        \" _MAX_ \" + M.util.get_string('total') +\n                        \" \" + M.util.get_string('entries') + \")\",\n                    \"paginate\": {\n                        \"first\": M.util.get_string('first'),\n                        \"last\": M.util.get_string('last'),\n                        \"next\": M.util.get_string('next'),\n                        \"previous\": M.util.get_string('previous')\n                    }\n                }\n            });\n        }\n    }\n    \n    return {\n        init: init\n    };\n});"],"names":["define","$","init","on","categoryId","this","val","empty","append","value","text","M","util","get_string","ajax","url","cfg","wwwroot","type","data","sesskey","dataType","success","courses","each","index","course","id","fullname","error","require","log","debug","fn","DataTable"],"mappings":";;;;;;;AAOAA,2CAAO,CAAC,WAAW,SAASC,SAiFjB,CACHC,gBA5EAD,EAAE,eAAeE,GAAG,UAAU,eACtBC,WAAaH,EAAEI,MAAMC,MAGzBL,EAAE,aAAaM,QACfN,EAAE,aAAaO,OAAOP,EAAE,WAAY,CAChCQ,MAAO,GACPC,KAAMC,EAAEC,KAAKC,WAAW,aAAc,iCAGtCT,YAEAH,EAAEa,KAAK,CACHC,IAAKJ,EAAEK,IAAIC,QAAU,oDACrBC,KAAM,MACNC,KAAM,YACYf,mBACHO,EAAEK,IAAII,SAErBC,SAAU,OACVC,QAAS,SAASH,MACVA,KAAKG,SAAWH,KAAKI,SACrBtB,EAAEuB,KAAKL,KAAKI,SAAS,SAASE,MAAOC,QACjCzB,EAAE,aAAaO,OAAOP,EAAE,WAAY,CAChCQ,MAAOiB,OAAOC,GACdjB,KAAMgB,OAAOE,gBAK7BC,MAAO,WAEHC,QAAQ,CAAC,aAAa,SAASC,KAC3BA,IAAIC,MAAM,mCAQ1B/B,EAAEgC,GAAGC,WACLjC,EAAE,4BAA4BiC,UAAU,SAC1B,aACG,YACD,QACJ,cACM,aACA,YACF,QACEvB,EAAEC,KAAKC,WAAW,qBACdF,EAAEC,KAAKC,WAAW,QAC5B,WAAaF,EAAEC,KAAKC,WAAW,gBAC3BF,EAAEC,KAAKC,WAAW,WACtB,YAAcF,EAAEC,KAAKC,WAAW,MAChC,UAAYF,EAAEC,KAAKC,WAAW,MAC9B,YAAcF,EAAEC,KAAKC,WAAW,qBACvBF,EAAEC,KAAKC,WAAW,WAC3B,MAAQF,EAAEC,KAAKC,WAAW,MAC1B,MAAQF,EAAEC,KAAKC,WAAW,MAC1B,MAAQF,EAAEC,KAAKC,WAAW,wBACd,IAAMF,EAAEC,KAAKC,WAAW,iBACpC,UAAYF,EAAEC,KAAKC,WAAW,SAC9B,IAAMF,EAAEC,KAAKC,WAAW,WAAa,aAC7B,OACCF,EAAEC,KAAKC,WAAW,cACnBF,EAAEC,KAAKC,WAAW,aAClBF,EAAEC,KAAKC,WAAW,iBACdF,EAAEC,KAAKC,WAAW"}